# AI生成工作台

## 项目简介

AI生成工作台是一个基于Streamlit构建的一站式AI内容生成平台，集成了多种先进的生成模型，支持视频生成、图像生成等多种AI创作任务。该平台提供友好的用户界面，让用户能够轻松创建、管理和跟踪AI生成任务。

## 核心功能

### 1. 视频生成
- 支持veo3-fast和veo3-pro两种模型
- 提供中文提示词自动翻译功能
- 支持添加参考图片
- 可自定义视频参数（尺寸、时长等）

### 2. 文生图
- 基于Nano Banana模型
- 支持快速模式和高质量模式
- 支持多图参考输入
- 可通过URL或本地文件上传参考图

### 3. Sora2视频生成
- 集成Sora2先进视频生成模型
- 支持中文提示词自动翻译
- 支持添加参考图片
- 提供灵活的视频参数配置

### 4. 任务管理
- 统一的任务进度跟踪
- 支持任务状态查看（进行中、已完成、失败）
- 任务历史记录保存
- 任务统计和可视化展示

> **注意**：图生视频功能正在开发中，敬请期待

## 技术栈

- **前端框架**：Streamlit 1.31.1
- **后端通信**：Requests 2.31.0
- **环境管理**：python-dotenv 1.0.0
- **文件存储**：阿里云OSS SDK 2.22.0
- **数据处理**：Pandas 2.2.0, NumPy 1.26.3
- **AI接口**：OpenAI 1.33.0

## 快速开始

### 1. 环境准备

确保您的系统已安装Python 3.8或更高版本。

### 2. 安装依赖

```bash
pip install -r requirements.txt
```

### 3. 配置环境变量

复制示例环境配置文件并根据需要修改：

```bash
cp .env.example .env
```

在`.env`文件中设置以下必要配置：

```
# API配置
API_KEY=your_api_key_here

# 下载目录（可选）
DOWNLOAD_DIR=./gen
```

### 4. 配置阿里云OSS

在`oss_config.json`文件中配置阿里云OSS参数：

```json
{
  "access_key_id": "your_access_key_id",
  "access_key_secret": "your_access_key_secret",
  "endpoint": "your_endpoint",
  "bucket_name": "your_bucket_name",
  "region": "your_region"
}
```

### 5. 启动应用

```bash
streamlit run app.py
```

应用将在浏览器中自动打开，默认地址为 `http://localhost:8501`。

## 使用说明

### 全局配置

在侧边栏可以进行以下全局配置：
- **API Key**：输入您的API密钥
- **API节点**：选择"国内直连"或"海外"服务器
- **自动刷新**：启用或禁用任务进度自动刷新

### 创建视频生成任务

1. 导航至"视频生成"页面
2. 选择合适的模型（veo3-fast或veo3-pro）
3. 输入视频描述提示词（支持中文自动翻译）
4. 可选：上传参考图片
5. 配置视频参数（分辨率、时长等）
6. 点击"提交任务"按钮

### 创建图像生成任务

1. 导航至"文生图"页面
2. 选择模型模式（快速或高质量）
3. 输入图像描述提示词
4. 可选：上传参考图片
5. 配置生成参数
6. 点击"提交任务"按钮

### 任务管理

- 任务提交后会显示在任务列表中
- 可以查看任务的实时进度
- 任务完成后可直接下载生成的内容

## 项目结构

```
task_manager/
├── app.py              # 主应用入口
├── utils.py            # 工具函数
├── openai_llm.py       # OpenAI LLM接口
├── upload_to_oss_with_url.py # OSS上传工具
├── pages/              # 页面目录
│   ├── 1_视频生成.py   # 视频生成页面
│   ├── 2_文生图.py     # 图像生成页面
│   ├── 3_图生视频.py   # 图生视频页面（开发中）
│   └── 4_Sora2视频生成.py # Sora2视频生成
├── temp_uploads/       # 临时上传目录
├── requirements.txt    # 项目依赖
├── .env                # 环境变量配置
└── .env.example        # 环境变量示例
```

## 注意事项

1. 请确保您的API Key有效且有足够的权限
2. 大文件上传可能需要较长时间，请耐心等待
3. 生成任务可能需要一定时间完成，取决于服务器负载
4. 请合理使用资源，避免频繁提交大量任务

## 故障排除

### 常见问题

1. **API Key未配置**：请在.env文件中设置有效的API_KEY
2. **OSS上传失败**：检查oss_config.json配置是否正确
3. **任务提交失败**：确保网络连接正常，API节点选择正确
4. **自动翻译功能不可用**：检查OpenAI API配置是否正确

### 日志查看

任务处理过程中的日志会显示在Streamlit应用界面，您也可以在控制台查看更详细的运行日志。

## License

[MIT License](LICENSE)